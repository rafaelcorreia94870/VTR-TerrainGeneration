<?xml version="1.0" ?>
<project name="Terrain Generation" width="800" height="800">
	<assets>
        <attributes>
            <attribute type = "RENDERER" data="FLOAT" name = "level" value = "1.0" />
			<attribute name="num_octaves" type="RENDERER" data="INT" value="8" />
            <attribute name="scale" type="RENDERER" data= "FLOAT" value="128" />
			<attribute name="persistence" type="RENDERER" data="FLOAT" value="0.5" />
			<attribute name="lacunarity" type="RENDERER" data="FLOAT" value="2.0" />
			<attribute name="heightMultiplier" type="RENDERER" data="FLOAT" value="20.0" />
			<attribute name="initAmplitude" type="RENDERER" data="FLOAT" value="1.0" />
			<attribute name= "initFrequency" type="RENDERER" data="FLOAT" value="1.0" />
			<attribute name= "initbaseHeight" type="RENDERER" data="FLOAT" value="0.0" />

			<attribute name="option" data="INT" type="RENDERER" value=0 />
			<attribute name="alpha" data="FLOAT" type="RENDERER" value=0.75 />

			<attribute name="squareSize" data="INT" type="RENDERER" value=5 />
			<attribute name="chunkSize" data="INT" type="RENDERER" value=7 />

			<attribute type="RENDERER" name="height" data="FLOAT" value="5.0"/>
			<attribute type="RENDERER" name="width" data="FLOAT" value="300.0"/>
			<attribute type="RENDERER" name="nwaves" data="INT" value="2"/>
			<attribute type="RENDERER" name="speed" data="FLOAT" value=".1"/>
			<attribute type="RENDERER" name="seeTessLevels" data="INT" value="0"/>
			<attribute type="RENDERER" name="foam_option" data="INT" value="0"/>


			<attribute type="PASS" name="FROM" data="FLOAT" value = -1 />
			<attribute type="PASS" name="TO" data="FLOAT" value = -1 />
        </attributes>
		
		<scenes>
            <scene name="SkyBox" >
                <geometry name="skyBox" material="skybox" type="BOX" >
                </geometry>
            </scene>
            <scene name="Terrain" >
				
				<geometry name="terrain" type ="GRID" LENGTH="2000" DIVISIONS="100" material="terrain">
                	<TRANSLATE x="0.0" y="0.0" z="0.0" />
                </geometry>
				<!--geometry name="terrain" type ="GRID" LENGTH="2000" DIVISIONS="50" material="terrain"-->
				
			</scene>
			<scene name="Axis">
        		<geometry name = "axis" type = "AXIS"  >
        		    <SCALE x=500 y=500 z =500 />
        		</geometry>
    		</scene>
			<scene name="chunks" >
				<buffers name="chunks" primitive="POINTS" material="chunks" >
					<position name="point" fromLibrary="Chunks" />
				</buffers>
			</scene>
			
			<scene name="Water" >
				<geometry name="water" type ="GRID" LENGTH="2000" DIVISIONS="100" material="water">
					<TRANSLATE x="0.0" y="4.0" z="0.0" />
				</geometry>
			</scene>
		</scenes>
        <viewports>
			<viewport name="MainViewport">
                <ORIGIN x="0.0" y="0.0" />
				<CLEAR_COLOR r="1.0" g="1.0" b="1.0" />
			</viewport>
            <viewport name="MinimapViewport">
                <ORIGIN x="0.0" y="0.75" />
                <SIZE width="0.25" height="0.25" />
				<CLEAR_COLOR r="1.0" g="1.0" b="1.0" />
			</viewport>
			<!--viewport name="RightViewport" >
				<ORIGIN x=0.5 y=0.0 />
				<SIZE width=0.5 height=1 />
				<CLEAR_COLOR r="0.2" g="0.2" b="0.4" />
			</viewport>
			<viewport name="LeftViewport" >
				<ORIGIN x=0.0 y=0.0 />
				<SIZE width=0.5 height=1 />
				<CLEAR_COLOR r="0.2" g="0.2" b="0.4" />
			</viewport-->
		</viewports>
		
		<cameras>
			<camera name="MainCamera">
				<viewport name="MainViewport" />
				<TYPE value="PERSPECTIVE"/>
				<POSITION x="0.0"   y="70.0"  z="200.0" />
				<VIEW     x="0.0"   y="-0.5"   z="-1.0"   />
				<UP       x="0.0"   y="1.0"    z="0.0"    />
                <NEAR value="0.1" />
                <FAR value="150000.0" />
			</camera>
			<camera name="GOD">
				<viewport name="MainViewport" />
				<TYPE value="PERSPECTIVE"/>
				<POSITION x="0.0"   y="70.0"  z="200.0" />
				<VIEW     x="0.0"   y="-0.5"   z="-1.0"   />
				<UP       x="0.0"   y="1.0"    z="0.0"    />
                <NEAR value="0.1" />
                <FAR value="150000.0" />
			</camera>
            <camera name="Minimap">
				<viewport name="MinimapViewport" />
				<POSITION x="0.0"   y="4500"  z="0.0"    />
				<VIEW     x="0.0"   y="-1"   z="0.001"    />
				<UP       x="0.0"   y="1.0"     z="0.0"    />
			</camera>
		</cameras>

        <lights>
			<light name="Sun" >
				<DIRECTION x="1.0" y="-0.5" z="-2" />
			</light>
		</lights>
        		
		<materialLibs>
			<materialLib filename="materials/terrain_triangle.mlib"/>
            <materialLib filename="materials/skybox.mlib" />
			<materialLib filename="materials/chunks.mlib" />
			<materialLib filename="materials/water.mlib" />
			<!--materialLib filename="materials/shadowMaterials3.mlib"/-->

		</materialLibs>
		
	</assets>


    <pipelines>
        <pipeline name="terrain" default="true" defaultCamera="MainCamera">

			
			

            <pass class="default" name="skybox">
				<scenes>
					<scene name="SkyBox" />
				</scenes>
				<camera name="MainCamera" />
				<viewport name="MainViewport" />
				<lights>
					<light name="Sun" />
				</lights>
				<materialMaps>
					<map fromMaterial="skybox"
						toMaterial="skybox" toLibrary="base" />
				</materialMaps>
				<COLOR_CLEAR value="false"/>
			</pass>



			<!--pass name="Chunks" class="default" >
				<scenes instances = "1023">
					<scene name="chunks" />
				</scenes>
				<camera name="MainCamera" />
				<viewport name="MainViewport"/>
				<lights>
					<light name="Sun" />
				</lights>
				<materialMaps>
					<map fromMaterial="chunks" toMaterial="chunks"  toLibrary="Chunks" />
				</materialMaps>
				<renderTarget name="buffer" fromLibrary="Chunks"/>
				<COLOR_CLEAR value="false"/>
			</pass-->


            <pass name="Terrain" class="default" >
				<scenes>
					<!--buffers name = "buffer" primitive="TRIANGLES" material="chunks">
					
					</buffers-->
					
					<scene name="Terrain" />

				</scenes>
                <camera name="MainCamera" />
                <!--viewport name="RightViewport"-->
				<viewport name="MainViewport"/>
                <lights>
                    <light name="Sun" />
                </lights>
 				<materialMaps>
                    <map fromMaterial="terrain" toMaterial="terrain"  toLibrary="Terrain" />
				</materialMaps>
				<COLOR_CLEAR value="false"/>

            </pass>


			<pass name="Water" class="default" >
				<scenes>
					<scene name="Water" />
				</scenes>
				<camera name="MainCamera" />
				<viewport name="MainViewport"/>
				<lights>
					<light name="Sun" />
				</lights>
				<materialMaps>
					<map fromMaterial="*" toMaterial="water"  toLibrary="water" />
				</materialMaps>
				<COLOR_CLEAR value="false"/>
				<DEPTH_CLEAR value="false"/>
			</pass>


			<!--pass class="depthmap" name="pass1">
				<scenes>
					<scene name="Terrain" />
				</scenes>
				<TO value="5" />
				<camera name="MainCamera" />
				<lights>
					<light name="Sun" />
				</lights>
				<renderTarget name="shadowMap1" fromLibrary="Shadow Materials"/>
				<materialMaps>
					<map fromMaterial="*" toLibrary="Shadow Materials" toMaterial="depthOnly" />
				</materialMaps>
			</pass>
			
			<pass class="depthmap" name="pass2">
				<scenes>
					<scene name="Terrain" />
				</scenes>
				<FROM value="5" />
				<TO value="15" />
				<camera name="MainCamera" />
				<lights>
					<light name="Sun" />
				</lights>
				<renderTarget name="shadowMap2" fromLibrary="Shadow Materials"/>
				<materialMaps>
					<map fromMaterial="*" toLibrary="Shadow Materials" toMaterial="depthOnly" />
				</materialMaps>
			</pass>
			
			<pass class="depthmap" name="pass3">
				<scenes>
					<scene name="Terrain" />
				</scenes>
				<FROM value="15" />
				<TO value="50" />
				<camera name="MainCamera" />
				<lights>
					<light name="Sun" />
				</lights>
				<renderTarget name="shadowMap3" fromLibrary="Shadow Materials"/>
				<materialMaps>
					<map fromMaterial="*" toLibrary="Shadow Materials" toMaterial="depthOnly" />
				</materialMaps>
			</pass>
			
			<pass class="depthmap" name="pass4">
				<scenes>
					<scene name="Terrain" />
				</scenes>
				<FROM value="50" />
				<TO value="150" />
				<camera name="MainCamera" />
				<lights>
					<light name="Sun" />
				</lights>
				<renderTarget name="shadowMap4" fromLibrary="Shadow Materials"/>
				<materialMaps>
					<map fromMaterial="*" toLibrary="Shadow Materials" toMaterial="depthOnly" />
				</materialMaps>
			</pass>
			
			<pass class="default" name="pass5">
				<scenes>
					<scene name="Terrain" />
				</scenes>
				<camera name="MainCamera" />
				<lights>
					<light name="Sun" />
				</lights>
				<materialMaps>
					<map fromMaterial="*" toLibrary="Shadow Materials" toMaterial="flat-with-shadow-4-depths" />
				</materialMaps>
			</pass-->
			
			<!--pass name = "texturing" class = "default">
				<scenes>
                    <scene name="Terrain" />
                </scenes>
                <camera name="MainCamera" />
                <viewport name="MainViewport"/>
                <lights>
                    <light name="Sun" />
                </lights>
 				<materialMaps>
                    <map fromMaterial="*" toMaterial="grass_rock"  toLibrary="Terrain" />
				</materialMaps>
				<COLOR_CLEAR value="false"/>
			</pass-->

			<!--pass class="default" name="Gods View">
				<mode value="DONT_RUN"/>
				<scenes>
					<scene name="Terrain" />
					<scene name="MainCamera" />
				</scenes>
				<camera name="GOD" />
				<viewport name="LeftViewport" />
				<lights>
					<light name="Sun" />
				</lights>
			</pass-->
			

            <!--pass name="Minimap" class="default" >
                <scenes>
                    <scene name="Terrain" />
                </scenes>
                <camera name="Minimap" />
                <viewport name="MinimapViewport"/>
                <lights>
                    <light name="Sun" />
                </lights>
 				<materialMaps>
                    <map fromMaterial="terrain" toMaterial="terrain"  toLibrary="Terrain" />
				</materialMaps>
				<COLOR_CLEAR value="false"/>
            </pass-->

        </pipeline>
    </pipelines>
	
	<interface>
		<window label="Terrain Generation">
			<var label = "level" type ="RENDERER" context="CURRENT" 
					component="level" def="min=1.0 max=1 step=0.1" />
			<var label = "num_octaves" type ="RENDERER" context="CURRENT"
					component="num_octaves" def="min=1 max=32 step=1" />
			<var label = "scale" type ="RENDERER" context="CURRENT"
					component="scale" def="min=0.1 max=1000 step=0.1" />
			<var label = "persistence" type ="RENDERER" context="CURRENT"
					component="persistence" def="min=0.1 max=1.0 step=0.1" />
			<var label = "lacunarity" type ="RENDERER" context="CURRENT"
					component="lacunarity" def="min=0.1 max=2.0 step=0.1" />
			<var label = "HeightMultiplier" type ="RENDERER" context="CURRENT"
					component="heightMultiplier" def="min=0.1 max=100.0 step=0.1" />
			<var label = "initAmplitude" type ="RENDERER" context="CURRENT"
					component="initAmplitude" def="min=0.1 max=100.0 step=0.1" />
			<var label = "initFrequency" type ="RENDERER" context="CURRENT"
					component="initFrequency" def="min=0.1 max=100.0 step=0.1" />
			<var label = "initbaseHeight" type ="RENDERER" context="CURRENT"
					component="initbaseHeight" def="min=0.1 max=100.0 step=0.1" />
			<var label = "seeTessLevels" type ="RENDERER" context="CURRENT"
					component="seeTessLevels" def="min=0 max=1 step=1" />
			
		</window>
		<window label="Wave Settings" >
			<var label="Height" type="RENDERER" context="CURRENT" 
					component="height" def="min=-1.0 max=100 step=1.0" />
			<var label="Width" type="RENDERER" context="CURRENT" 
					component="width" def="min=1.0 max=2000 step=10.0" />
			<var label="Number of Waves" type="RENDERER" context="CURRENT"
					component="nwaves" def="min=1 max=100 step=1" />
			
			<var label ="Speed" type ="RENDERER" context="CURRENT"
					component="speed" def="min=0.01 max=1.0 step=0.01" />
			<var label ="Foam Option" type ="RENDERER" context="CURRENT"
					component="foam_option" def="min=0 max=1 step=1" />
		</window>
	</interface>
</project>
		
	